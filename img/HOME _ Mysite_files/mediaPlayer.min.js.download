define("mediaPlayer",["lodash","coreUtils","santa-components","componentsCore","skins","santa-core-utils","react","components"],function(e,t,i,n,o,r,s,a){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=917)}({0:function(t,i){t.exports=e},1:function(e,i){e.exports=t},10:function(e,t){e.exports=r},15:function(e,t){e.exports=s},18:function(e,t){e.exports=a},2:function(e,t){e.exports=i},3:function(e,t){e.exports=n},5:function(e,t){e.exports=o},917:function(e,t,i){var n,o;function r(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n=[i(0),i(15),i(3),i(1),i(10),i(18),i(2),i(5),i(918),i(919)],void 0===(o=function(e,t,i,n,o,s,a,c,p){"use strict";var l=n.mediaConsts,u=s.mediaCommon.mediaLogicMixins.mediaPlayer,f=o.timersMixins.timeoutsMixin,d=a.mixins.inlineContentMixin,m=function(t,i,n){var o=e.isEmpty(n)?{}:{transform:"rotate(0)"};if(t=e.assign({},t,o),(i.css||i.svg)&&(t=e.assign(e.omit(t,"boxShadow"),{overflow:"visible"},i.css||{})),e.isEmpty(t.borderWidth))return t;var r=parseInt(t.borderWidth,10);return e.assign({},t,{margin:"-".concat(r,"px")})},h=function(e){var t=e.compProp.flip,i=e.compDesign.cssStyle.cssBoxShadow[0],n=i.offsetX,o=i.offsetY,r=e.flipTransformStyle.transform,s={height:"100%"},a=2*-n.value,c=2*-o.value;switch(t){case"vertical":s.transform="".concat(r," translateY(").concat(c,"px)");break;case"horizontal":s.transform="".concat(r," translateX(").concat(a,"px)");break;case"both":s.transform="".concat(r," translate(").concat(a,"px, ").concat(c,"px)")}return s},y=function(e,t,i,n,o){var r={};return n&&n[o]&&(r[o]="".concat(n[o],"\n@supports (mask-repeat: no-repeat) or (-webkit-mask-repeat: no-repeat) {\n  .").concat(o,"_masked {\n    visibility: visible;\n  }\n}")),r};y.cssTypes={getStyleData:a.santaTypesDefinitions.Component.getStyleData,themeData:a.santaTypesDefinitions.Theme.THEME_DATA,siteZoomRatio:a.santaTypesDefinitions.Mobile.siteZoomRatio,invertedZoomRatio:a.santaTypesDefinitions.Mobile.invertedZoomRatio,orientationZoomFix:a.santaTypesDefinitions.Mobile.orientationZoomFix,mobileZoom:a.santaTypesDefinitions.Mobile.mobileZoom,scriptsLocationMap:a.santaTypesDefinitions.ServiceTopology.scriptsLocationMap};var v={displayName:"MediaPlayer",mixins:[i.mixins.customSkinBasedComp({customCssFunc:y}),u,f,i.mixins.createChildComponentMixin,d],propTypes:{style:a.santaTypesDefinitions.Component.style.isRequired,compDesign:a.santaTypesDefinitions.Component.compDesign,compProp:a.santaTypesDefinitions.Component.compProp,isMobileDevice:a.santaTypesDefinitions.Device.isMobileDevice,renderParts:a.santaTypesDefinitions.Media.renderParts,layoutContainerClassName:a.santaTypesDefinitions.Layout.layoutContainerClassName,isResponsive:a.santaTypesDefinitions.RendererModel.isResponsive,containerStyle:a.santaTypesDefinitions.MediaPlayerDesign.containerStyle,flipTransformStyle:a.santaTypesDefinitions.Media.flipTransformStyle,mask:a.santaTypesDefinitions.Media.mask,dropShadow:a.santaTypesDefinitions.Media.dropShadow,cssFeatureQueriesSupported:a.santaTypesDefinitions.BrowserFlags.cssFeatureQueriesSupported,isMobileView:a.santaTypesDefinitions.isMobileView},statics:{behaviors:s.mediaCommon.mediaBehaviors.mediaPlayer},getInitialState:function(){this.inMobileInteractionState=!1,this.interactionsNotificationList=[],this.compDesignOverride=void 0},addPropsToChildren:function(e){var i={interactionsNotificationRegistrar:this.interactionsNotificationRegistrar};return t.Children.map(e,function(e){return t.cloneElement(e,i)})},interactionsNotificationRegistrar:function(e){this.interactionsNotificationList.push(e)},toggleHover:function(e){var t=this.getMediaState().playbackState===l.playbackTypes.PLAY_ENDED,i=!1===this.props.compProp.playerInteraction.allowReplay&&t,n="mouseleave"!==e.type&&!i;this.interactionsNotificationList.forEach(function(e){return e({isHover:n})})},notifyMouseMove:function(){var e=this;this.interactionsNotificationList.forEach(function(e){return e({mouseMove:!0})}),this.inMobileInteractionState=!0,this.clearTimeout(),this.setTimeout(function(){e.inMobileInteractionState=!1},4500)},handleHoverAction:function(e){var t=this;return function(i){t.toggleHover(i),e.forEach(function(e){if(e.action){var t=e.params||[];e.action.apply(e,r(t))}})}},getAudioHoverInteraction:function(t){var i=e.get(this.props.compProp,["playerAudioInteraction",t]);return{mute:{action:this.mediaVolumeFadeOut,params:[.5]},unmute:{action:this.mediaVolumeFadeIn,params:[.5]}}[i]},getVideoHoverInteraction:function(e){var t=this.props.compProp.playerInteraction[e];return{play:{action:this._playMedia},pause:{action:this.pauseMedia},none:null}[t]},getClickInteraction:function(){var e=this;return{toggle:function(){return e.togglePlayMedia()},play:function(){return e._playMedia({persist:!0})}}[this.props.compProp.playerInteraction.click]},convertHoverToCommandActions:function(){var t=this;return"pause"===this.props.compProp.playerInteraction.rollOut?function(){return t.togglePlayMedia()}:"play"===this.props.compProp.playerInteraction.rollIn?function(){return t._playMedia()}:e.noop},shouldTriggerAction:function(){var e=this.getMediaState().playbackState===l.playbackTypes.READY,t=!1===this.props.compDesign.background.mediaRef.hasAudio||this.props.compProp.disableAudio;return this.inMobileInteractionState||e||t},getTouchInteraction:function(e){var t=this;return function(i){i.preventDefault(),t.invokeMobileInteraction(i,e)}},getMobileClickInteraction:function(e){var t=this;return function(i){t.invokeMobileInteraction(i,e)}},invokeMobileInteraction:function(e,t){this.shouldTriggerAction()&&t(),this.notifyMouseMove(),this.toggleHover(e)},isMobile:function(){return this.props.isMobileView||this.props.isMobileDevice},getControls:function(){return!!this.props.renderParts.media.video.length?this.getChildrenRenderer({children:this.addPropsToChildren(this.props.children)}):null},getInteractionEvents:function(){if(this.isMobile()){var t=this.getClickInteraction()||this.convertHoverToCommandActions(),i=this.props.isMobileDevice?"onTap":"onClick";return n={},o=i,r=this.getMobileClickInteraction(t),o in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n}var n,o,r,s=[this.getVideoHoverInteraction("rollIn"),this.getAudioHoverInteraction("rollIn")],a=[this.getVideoHoverInteraction("rollOut"),this.getAudioHoverInteraction("rollOut")];return{onMouseMove:this.notifyMouseMove,onClick:this.getClickInteraction(),onMouseEnter:this.handleHoverAction(e.compact(s)),onMouseLeave:this.handleHoverAction(e.compact(a))}},getSkinProperties:function(){var t=this.getControls(),i=this.props.dropShadow,n={style:m(this.props.containerStyle,i,this.props.flipTransformStyle)};return i.svg&&(n.addChildrenBefore=[a.utils.createReactElement("div",{style:h(this.props),className:this.classSet({"drop-shadow":!0}),dangerouslySetInnerHTML:{__html:i.svg}})]),{"":e.assign({style:this.props.style,className:this.classSet({masked:!!this.props.mask&&this.props.cssFeatureQueriesSupported})},this.getInteractionEvents()),background:this.createFillLayers({compDesign:this.compDesignOverride||this.props.compDesign,enableVideo:!!t,styleOverrides:this.props.flipTransformStyle}),container:n,inlineContent:e.assign({children:t},this.props.isResponsive&&{className:this.props.layoutContainerClassName,style:{height:"100%"}})}}};return i.compRegistrar.register("wysiwyg.viewer.components.MediaPlayer",v),c.skinsMap.addBatch(p),v}.apply(t,n))||(e.exports=o)},918:function(e,t,i){var n,o,r;"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(n=function(){"use strict";var e={"wysiwyg.viewer.skins.mediaPlayerSkin":{react:[["div","container",[],{},["div","background",[],{}]],["div","inlineContentParent",[],{},["div","inlineContent",[],{}]]],css:{"% *":"-webkit-tap-highlight-color:rgba(0, 0, 0, 0);","%_masked":"visibility:hidden;","%inlineContentParent":"position:absolute;top:0;right:0;bottom:0;left:0;","%container":"position:absolute;top:0;right:0;bottom:0;left:0;","%container %_drop-shadow svg":"overflow:visible !important;"}}};return e})?n.apply(t,o):n)||(e.exports=r)},919:function(e,t,i){var n,o;n=[i(0),i(1),i(3)],void 0===(o=function(e,t,i){"use strict";i.dataRequirementsCheckerRegistrar.registerCheckerForCompType("wysiwyg.viewer.components.MediaPlayer",function(i,n){var o=e.get(n,["properties","overrideMask","svgId"])||e.get(n,["design","background","mediaRef","mask","svgId"]);return o?e.compact([t.svg.createSvgFetchRequest(i.serviceTopology.mediaRootUrl,i,o)]):[]})}.apply(t,n))||(e.exports=o)}})});
//# sourceMappingURL=mediaPlayer.min.js.map